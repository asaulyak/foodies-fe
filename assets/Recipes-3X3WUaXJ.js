import{j as e,G as N,r as s,d as F,b as R,h as L,e as P,u as k,a as A,f as E,N as w}from"./index-BM8_i0oL.js";import{R as B}from"./RecipeCard-xNhJ8H_Z.js";import{M as q,S as M}from"./SubTitle-BWVtGwtm.js";import{S as W}from"./react-select.esm-DrI1aZ8k.js";import{P as T}from"./Pagination-Cb_7Kp-t.js";import{c as V}from"./categories.selectors-w5pH7G6F.js";const z="_recipesSectionWrap_qpuuj_1",G="_recipesListWrap_qpuuj_16",H="_recipesListContent_qpuuj_24",$="_noRecipesPlaceholder_qpuuj_38",C={recipesSectionWrap:z,recipesListWrap:G,recipesListContent:H,noRecipesPlaceholder:$},D=({recipes:c})=>c.length?e.jsx("ul",{className:C.recipesListWrap,children:c.map(n=>e.jsx(B,{recipe:n},n.id))}):e.jsx("div",{children:"No recipes available"});function O(c){return N({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(c)}const J="_categorySection_gg3j3_1",K="_buttonBack_gg3j3_14",Q="_categoryInfoWrap_gg3j3_24",v={categorySection:J,buttonBack:K,categoryInfoWrap:Q},U="_recipesFilterWrap_1adel_1",X="_recipeFilterSelect_1adel_9",I={recipesFilterWrap:U,recipeFilterSelect:X},Y=()=>{const[c,n]=s.useState([]),[l,m]=s.useState([]),[_,S]=s.useState(),[p,x]=s.useState(),[b,d]=s.useState(),[u,j]=s.useState(),[a,g]=F();s.useEffect(()=>{d(!0),j(!0);const t=async()=>{try{const{data:r}=await L.get("/ingredients");n([{value:"all",label:"All"}].concat(r.map(h=>({value:h.id,label:h.name}))))}catch{n([])}finally{d(!1)}},o=async()=>{try{const{data:r}=await L.get("/areas");m([{value:"all",label:"All"}].concat(r.map(h=>({value:h.id,label:h.name}))))}catch{m([])}finally{j(!1)}};t(),o()},[]),s.useEffect(()=>{S(a.get("ingredient")||"all"),x(a.get("area")||"all")},[a]);const f=t=>{a.set("ingredient",t.value),a.set("page","1"),g(a)},y=t=>{a.set("area",t.value),a.set("page","1"),g(a)},i={option:(t,o)=>({...t,backgroundColor:o.isSelected?"#bfbebe29":"#fff",color:o.isSelected?"#1a1a1a":t.color,"&:active":{backgroundColor:"#c0c0c0"},"&:hover":{backgroundColor:"#bfbebe29"}})};return b||u?e.jsx(R,{}):e.jsxs("div",{className:I.recipesFilterWrap,children:[e.jsx(W,{options:c,placeholder:"Ingredients",styles:i,onChange:f,className:I.recipeFilterSelect,defaultValue:c.find(t=>t.value===_)}),e.jsx(W,{options:l,placeholder:"Areas",styles:i,onChange:y,className:I.recipeFilterSelect,defaultValue:l.find(t=>t.value===p)})]})},re=()=>{const{id:c}=P(),[n]=F(),[l,m]=s.useState({}),[_,S]=s.useState([]),[p,x]=s.useState({limit:12,total:0}),[b,d]=s.useState(!1),[u,j]=s.useState(null),a=k(V),g=A(),f=s.useRef(null),y=()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"start"})};return s.useEffect(()=>{a!=null&&a.length||g(E())},[g]),s.useEffect(()=>{j((a==null?void 0:a.find(i=>i.id===c))||null)},[a,c]),s.useEffect(()=>{const i=n.get("ingredient"),t=n.get("area"),o=n.get("page"),r={categoryId:c==="all"?void 0:c};i&&(r["ingredientIds[]"]=i==="all"?void 0:i),t&&(r.areaId=t==="all"?void 0:t),o&&(r.page=o),r.limit=p.limit,m(r)},[c,n]),s.useEffect(()=>{const i=async()=>{d(!0);try{const{data:t}=await L.get("/recipes/search",{params:l});S(t.data),y(),x(o=>({...o,total:t.total}))}catch{S([])}finally{d(!1)}};Object.keys(l).length&&i()},[l]),e.jsxs("section",{className:v.categorySection,children:[e.jsxs("div",{className:v.categoryInfoWrap,children:[e.jsxs(w,{to:"/",className:v.buttonBack,children:[e.jsx(O,{size:18}),e.jsx("span",{children:"Back"})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx(q,{children:u.name}),e.jsx(M,{children:u.description})]})]}),e.jsxs("div",{className:C.recipesSectionWrap,children:[e.jsx(Y,{}),e.jsx("div",{ref:f,className:C.recipesListContent,children:b?e.jsx(R,{}):e.jsxs(e.Fragment,{children:[e.jsx(D,{recipes:_}),e.jsx(T,{total:p.total,limit:p.limit,onPageChange:y})]})})]})]})};export{re as Recipes,re as default};
