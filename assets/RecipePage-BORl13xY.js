import{r as m,j as e,R as W,h as u,u as b,s as N,a as f,b as E,B as v,o as w,M as $,c as B,d as P,e as C,P as F}from"./index-wv11EKAc.js";const S="_section_17si5_1",D="_sectionTitle_17si5_19",I="_list_17si5_57",q="_item_17si5_73",h={section:S,sectionTitle:D,list:I,item:q},M=()=>{const[n,s]=m.useState([]);return m.useEffect(()=>{async function t(){return(await u.get("/recipes/popular")).data}t().then(s)},[]),e.jsxs("section",{className:h.section,children:[e.jsx("h2",{className:h.sectionTitle,children:"Popular recipes"}),!!n.length&&e.jsx("ul",{className:h.list,children:n.map(t=>e.jsx(W,{recipe:t,className:h.item},t.id))})]})},U="_wrapper_19wdy_1",A="_title_19wdy_15",L="_list_19wdy_47",z="_item_19wdy_65",H="_imgWrapper_19wdy_85",J="_img_19wdy_85",O="_textWrapper_19wdy_129",Y="_accentText_19wdy_155",r={wrapper:U,title:A,list:L,item:z,imgWrapper:H,img:J,textWrapper:O,accentText:Y},G=({ingredients:n})=>e.jsxs("div",{className:r.wrapper,children:[e.jsx("h3",{className:r.title,children:"Ingredients"}),e.jsx("ul",{className:r.list,children:n.map(s=>e.jsxs("li",{className:r.item,children:[e.jsx("div",{className:r.imgWrapper,children:e.jsx("img",{className:r.img,src:s.image,alt:`Ingredient ${s.title}`,onError:({currentTarget:t})=>{t.onerror=null,t.src="https://placehold.co/60x60/BFBEBE/050505?text=Image"}})}),e.jsxs("div",{className:r.textWrapper,children:[e.jsx("p",{className:r.accentText,children:s.name}),e.jsx("p",{children:s.quantity||"quantity"})]})]},s.id))})]}),K="_wrapper_nsgkb_1",Q="_infoSection_nsgkb_25",V="_title_nsgkb_49",X="_thumb_nsgkb_83",Z="_info_nsgkb_25",ee="_description_nsgkb_125",se="_btn_nsgkb_155",te="_accentText_nsgkb_181",ne="_btnWrapper_nsgkb_195",ie="_btnThumb_nsgkb_225",ce="_text_nsgkb_233",i={wrapper:K,infoSection:Q,title:V,thumb:X,info:Z,description:ee,btn:se,accentText:te,btnWrapper:ne,btnThumb:ie,text:ce},ae="_hero_12qpl_1",re="_imgWrapper_12qpl_21",j={hero:ae,imgWrapper:re},oe=({image:n,title:s})=>e.jsx("div",{className:j.hero,children:e.jsx("div",{className:j.imgWrapper,children:e.jsx("img",{className:j.img,src:n||"",alt:`Dish ${s}`,onError:({currentTarget:t})=>{t.onerror=null,t.src="https://placehold.co/400x400/BFBEBE/050505?text=Image not found"},loading:"lazy"})})}),le=({children:n,id:s="",img:t="",title:c="Dish",category:o="Dish",time:a="0",description:_="Dish",authorName:l="John",authorAvatar:p=""})=>{const y=b(N),R=f(),k=E(),T=()=>{if(!y)return R(w($.signin));k(`/user/${s}`)};return e.jsxs("div",{className:i.wrapper,children:[e.jsx(oe,{image:t,title:c}),e.jsxs("div",{children:[e.jsxs("section",{className:i.infoSection,children:[e.jsx("h2",{className:i.title,children:c}),e.jsxs("div",{className:i.thumb,children:[e.jsx("p",{className:i.info,children:o}),e.jsxs("p",{className:i.info,children:[a," min"]})]}),e.jsx("p",{className:i.description,children:_}),e.jsxs(v,{type:"button",className:i.btn,onClick:T,children:[e.jsx("div",{className:i.btnWrapper,children:e.jsx("img",{src:p||"",alt:"User Avatar",onError:({currentTarget:g})=>{g.onerror=null,g.src="https://placehold.co/50x50/BFBEBE/050505?text=Image"}})}),e.jsxs("div",{className:i.btnThumb,children:[e.jsx("p",{className:i.text,children:"Created by:"}),e.jsx("p",{className:i.accentText,children:l})]})]})]}),n]})]})},pe="_wrapper_1jdr1_1",de="_title_1jdr1_15",me="_list_1jdr1_43",_e="_item_1jdr1_81",he="_btn_1jdr1_89",d={wrapper:pe,title:de,list:me,item:_e,btn:he},x=["Remove from favorites","Add to favorites"],xe=({preparation:n,recipeId:s})=>{const t=b(N),c=f();let o=!1;t&&(o=t.favoriteRecipes.includes(s));const a=o?x[0]:x[1],_=async l=>{if(!t)return c(w($.signin));if(!o){await u.post(`/recipes/${s}/favorites`).then(p=>{l.target.textContent=x[0],c(B(s))});return}await u.delete(`/recipes/${s}/favorites`).then(p=>{l.target.textContent=x[1],c(P(s))})};return e.jsxs("section",{className:d.wrapper,children:[e.jsx("h3",{className:d.title,children:"Recipe preparation"}),e.jsx("ul",{className:d.list,children:n.split(`
`).map((l,p)=>e.jsx("p",{className:d.item,children:l},`${Date.now()}-${p}`))}),e.jsx(v,{onClick:_,className:d.btn,children:a})]})},ue=({changeBreadCrumbs:n})=>{const[s,t]=m.useState(null),{id:c}=C();return m.useEffect(()=>{async function o(a){return(await u.get(`/recipes/${a}`)).data}o(c).then(a=>{t(a),n(a.title)})},[c,n]),e.jsx(e.Fragment,{children:!!s&&e.jsxs(le,{id:s.id,img:s.thumb,title:s.title,category:s.category.name,time:s.time,description:s.description,authorName:s.user.name,authorAvatar:s.user.avatar,children:[e.jsx(G,{ingredients:s.ingredients}),e.jsx(xe,{preparation:s.instructions,recipeId:s.id})]})})},je="_section_kexri_1",ge={section:je},Ne=()=>{const[n,s]=m.useState("");return e.jsx("section",{className:ge.section,children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"visually-hidden",children:"Recipe Page"}),e.jsx(F,{currentPageName:n}),e.jsx(ue,{changeBreadCrumbs:s}),e.jsx(M,{})]})})};export{Ne as default};
