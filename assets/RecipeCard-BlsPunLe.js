import{u as r,A as y,w as k,b as D,s as E,a as $,x as U,r as j,j as e,c as v,L as z,F as A,H as M,$ as B,M as H,y as h,z as m,D as S,C as O}from"./index-BWeN6bZg.js";const P="_card_usehm_1",Y="_cardContent_usehm_11",q="_headerCard_usehm_17",G="_recipeImage_usehm_28",J="_recipeDescription_usehm_40",K="_avatarIconsRow_usehm_58",Q="_iconList_usehm_65",V="_iconWrapper_usehm_73",X="_active_usehm_104",Z="_spinner_usehm_108",ee="_btn_usehm_115",se="_btnWrapper_usehm_135",ae="_btnThumb_usehm_145",te="_text_usehm_149",ne="_accentText_usehm_155",s={card:P,cardContent:Y,headerCard:q,recipeImage:G,recipeDescription:J,avatarIconsRow:K,iconList:Q,iconWrapper:V,active:X,spinner:Z,btn:ee,btnWrapper:se,btnThumb:ae,text:te,accentText:ne},ie=({recipe:g,className:f,borderStyles:N})=>{const{id:n,title:u,user:o,description:C,thumb:R}=g,F=r(y),l=r(k),a=r(D),L=r(E),c=$(),_=U(),w=l?F.includes(n):!1,[d,x]=j.useState(w),[i,p]=j.useState(L),I=t=>{if(!l||a!=null&&a.includes(401)){c(h(m.signin));return}if(t.target.disabled=!0,p(!0),d){c(S(n)).catch(b=>{c(h(m.signin))}).finally(b=>{x(!1),p(!1),t.target.disabled=!1});return}c(O(n)).finally(b=>{x(!0),p(!1),t.target.disabled=!1})},T=()=>{_(`/recipe/${n}`)},W=()=>{if(!l||a!=null&&a.includes(401))return c(h(m.signin));_(`/user/${o.id}`)};return e.jsxs("li",{className:v([s.card,f]),children:[e.jsx(z,{to:`/recipe/${n}`,children:e.jsx("img",{src:R,alt:u||"Untitled Recipe",className:v([s.recipeImage,N])})}),e.jsxs("div",{className:s.cardContent,children:[e.jsxs("div",{className:s.textWrap,children:[e.jsx("h3",{className:s.headerCard,children:u||"Untitled Recipe"}),e.jsx("p",{className:s.recipeDescription,children:C||"No description"})]}),e.jsxs("div",{className:s.avatarIconsRow,children:[e.jsx("button",{type:"button",className:s.btn,onClick:W,children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:s.btnWrapper,children:e.jsx("img",{src:o.avatar||"https://www.gravatar.com/avatar",alt:"User Avatar",onError:({currentTarget:t})=>{t.onerror=null,t.src="https://placehold.co/50x50/BFBEBE/050505?text=Image"}})}),e.jsx("span",{className:s.btnThumb,children:e.jsx("span",{className:s.accentText,children:o.name})})]})}),e.jsxs("ul",{className:s.iconList,children:[e.jsx("li",{children:e.jsxs("button",{type:"button",className:s.iconWrapper,onClick:I,children:[d&&!i&&e.jsx(A,{size:18}),!d&&!i&&e.jsx(M,{size:18}),i&&e.jsx("span",{className:s.spinner,children:e.jsx(B,{visible:i,width:"80",color:"#bfbebe",ariaLabel:"infinity-spin-loading"})})]})}),e.jsx("li",{children:e.jsx("button",{type:"button",className:s.iconWrapper,onClick:T,children:e.jsx(H,{size:18})})})]})]})]})]})};export{ie as R};
