import{r as c,h as v,j as e,d as $,u as g,i as y,a as R,k as S,o as T,l as W,m as E,n as k,s as B,B as P,$ as C,p as F,q,g as I,t as L}from"./index-B4nxBvx0.js";import{R as D}from"./RecipeCard-Q6jyoIAF.js";const z="_sectionTitle_1rons_1",U="_item_1rons_27",A="_list_1rons_49",f={sectionTitle:z,item:U,list:A},M=()=>{const[t,s]=c.useState([]),[n,l]=c.useState(null),[r,p]=c.useState(!0),h=c.useCallback(async()=>await v.get("/recipes/popular"));return c.useEffect(()=>{t.length||h().then(({data:a})=>{s(a)}).catch(a=>l(a.message)).finally(p(!1))},[h,t]),e.jsxs("section",{className:f.section,children:[e.jsx("h2",{className:f.sectionTitle,children:"Popular recipes"}),r&&e.jsx($,{}),n&&e.jsx("p",{children:"Something went wrong. Please try again after a few seconds."}),!!t.length&&!n&&!r&&e.jsx("ul",{className:f.list,children:t.map(a=>e.jsx(D,{recipe:a,className:f.item},a.id))})]})},H="_wrapper_gs8kw_1",J="_title_gs8kw_9",O="_list_gs8kw_29",Y="_item_gs8kw_41",G="_imgWrapper_gs8kw_53",K="_img_gs8kw_53",Q="_textWrapper_gs8kw_85",V="_accentText_gs8kw_101",_={wrapper:H,title:J,list:O,item:Y,imgWrapper:G,img:K,textWrapper:Q,accentText:V},X=({ingredients:t})=>e.jsxs("div",{className:_.wrapper,children:[e.jsx("h3",{className:_.title,children:"Ingredients"}),e.jsx("ul",{className:_.list,children:t.map(s=>e.jsxs("li",{className:_.item,children:[e.jsx("div",{className:_.imgWrapper,children:e.jsx("img",{className:_.img,src:s.image,alt:`Ingredient ${s.title}`,onError:({currentTarget:n})=>{n.onerror=null,n.src="https://placehold.co/60x60/BFBEBE/050505?text=Image"}})}),e.jsxs("div",{className:_.textWrapper,children:[e.jsx("p",{className:_.accentText,children:s.name}),e.jsx("p",{children:s.quantity||"quantity"})]})]},s.id))})]}),Z="_wrapper_1p40s_1",ee="_infoSection_1p40s_9",se="_title_1p40s_19",te="_thumb_1p40s_41",ne="_info_1p40s_9",ae="_description_1p40s_85",ie="_btn_1p40s_103",ce="_btnWrapper_1p40s_143",re="_btnThumb_1p40s_163",oe="_text_1p40s_171",le="_accentText_1p40s_183",i={wrapper:Z,infoSection:ee,title:se,thumb:te,info:ne,description:ae,btn:ie,btnWrapper:ce,btnThumb:re,text:oe,accentText:le},pe="_hero_6fawz_1",de="_imgWrapper_6fawz_9",N={hero:pe,imgWrapper:de},me=({image:t,title:s})=>e.jsx("div",{className:N.hero,children:e.jsx("div",{className:N.imgWrapper,children:e.jsx("img",{className:N.img,src:t||"",alt:`Dish ${s}`,onError:({currentTarget:n})=>{n.onerror=null,n.src="https://placehold.co/400x400/BFBEBE/050505?text=Image not found"},loading:"lazy"})})}),he=({children:t,id:s="",img:n="",title:l="Dish",category:r="Dish",time:p="0",description:h="Dish",authorName:a="John",authorAvatar:x=""})=>{const o=g(y),b=R(),d=S(),m=()=>{if(!o)return b(T(W.signin));d(`/user/${s}`)};return e.jsxs("div",{className:i.wrapper,children:[e.jsx(me,{image:n,title:l}),e.jsxs("div",{children:[e.jsxs("section",{className:i.infoSection,children:[e.jsx("h2",{className:i.title,children:l}),e.jsxs("div",{className:i.thumb,children:[e.jsx("p",{className:i.info,children:r}),e.jsxs("p",{className:i.info,children:[p," min"]})]}),e.jsx("p",{className:i.description,children:h}),e.jsx("button",{type:"button",className:i.btn,onClick:m,children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:i.btnWrapper,children:e.jsx("img",{src:x||"https://www.gravatar.com/avatar",alt:"User Avatar",onError:({currentTarget:w})=>{w.onerror=null,w.src="https://placehold.co/50x50/BFBEBE/050505?text=Image"}})}),e.jsxs("span",{className:i.btnThumb,children:[e.jsx("span",{className:i.text,children:"Created by:"}),e.jsx("span",{className:i.accentText,children:a})]})]})})]}),t]})]})},_e="_title_weq8f_1",xe="_list_weq8f_19",ue="_item_weq8f_39",ge="_btn_weq8f_47",fe="_btnWrapper_weq8f_69",je="_spinner_weq8f_77",u={title:_e,list:xe,item:ue,btn:ge,btnWrapper:fe,spinner:je},j=["Remove from favorites","Add to favorites"],be=({preparation:t,recipeId:s})=>{const n=R(),l=g(y),r=g(E),p=g(k),h=g(B),[a,x]=c.useState(h),o=p.includes(s)?j[0]:j[1],b=d=>{if(!l||r!=null&&r.includes(401))return n(T(W.signin));if(d.target.disabled=!0,x(!0),!p.includes(s)){n(F(s)).then(m=>{m.payload.type||(d.target.textContent=j[0])}).finally(m=>{d.target.disabled=!1,x(!1)});return}n(q(s)).then(m=>{m.payload.type||(d.target.textContent=j[1])}).finally(m=>{d.target.disabled=!1,x(!1)})};return e.jsxs("section",{className:u.wrapper,children:[e.jsx("h3",{className:u.title,children:"Recipe preparation"}),e.jsx("ul",{className:u.list,children:t.split(`
`).map((d,m)=>e.jsx("p",{className:u.item,children:d},`${Date.now()}-${m}`))}),e.jsxs("div",{className:u.btnWrapper,children:[e.jsx(P,{onClick:b,className:u.btn,children:o}),a&&e.jsx("span",{className:u.spinner,children:e.jsx(C,{visible:a,width:"120",color:"#bfbebe",ariaLabel:"infinity-spin-loading"})})]})]})},Ne=({changeBreadCrumbs:t})=>{const[s,n]=c.useState(null),[l,r]=c.useState(null),[p,h]=c.useState(!0),{id:a}=I();return c.useEffect(()=>{if(s&&a===s.id)return;(async o=>await v.get(`/recipes/${o}`))(a).then(({data:o})=>{n(o),t(o.title)}).catch(o=>r(o.message)).finally(h(!1))},[a,t,s]),e.jsxs(e.Fragment,{children:[p&&e.jsx($,{}),l&&e.jsx("p",{children:"Something went wrong. Please try again after a few seconds."}),!!s&&!l&&!p&&e.jsxs(he,{id:s.id,img:s.thumb,title:s.title,category:s.category.name,time:s.time,description:s.description,authorName:s.user.name,authorAvatar:s.user.avatar,children:[e.jsx(X,{ingredients:s.ingredients}),e.jsx(be,{preparation:s.instructions,recipeId:s.id})]})]})},we="_section_jz1ql_1",ve={section:we},Re=()=>{const[t,s]=c.useState("");return e.jsx("section",{className:ve.section,children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"visually-hidden",children:"Recipe Page"}),e.jsx(L,{currentPageName:t}),e.jsx(Ne,{changeBreadCrumbs:s}),e.jsx(M,{})]})})};export{Re as default};
