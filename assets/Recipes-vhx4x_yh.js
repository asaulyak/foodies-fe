import{j as e,G as A,r as a,d as F,b as N,h as b,e as P,u as R,a as k,f as E,N as B}from"./index-DVJWuxQ1.js";import{R as w}from"./RecipeCard-DZi_1D8D.js";import{M as q,S as M}from"./SubTitle-7BmjQob0.js";import{S as W}from"./react-select.esm-BT2Ad_3n.js";import{P as z}from"./Pagination-Cel8QFWL.js";import{c as G}from"./categories.selectors-w5pH7G6F.js";import"./index-CtieyF54.js";import"./index-2xk0Zsye.js";const H="_recipesSectionWrap_qpuuj_1",T="_recipesListWrap_qpuuj_16",V="_recipesListContent_qpuuj_24",$="_noRecipesPlaceholder_qpuuj_38",C={recipesSectionWrap:H,recipesListWrap:T,recipesListContent:V,noRecipesPlaceholder:$},D=({recipes:c})=>c.length?e.jsx("ul",{className:C.recipesListWrap,children:c.map(r=>e.jsx(w,{recipe:r},r.id))}):e.jsx("div",{children:"No recipes available"});function O(c){return A({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(c)}const J="_categorySection_gg3j3_1",K="_buttonBack_gg3j3_14",Q="_categoryInfoWrap_gg3j3_24",v={categorySection:J,buttonBack:K,categoryInfoWrap:Q},U="_recipesFilterWrap_1adel_1",X="_recipeFilterSelect_1adel_9",I={recipesFilterWrap:U,recipeFilterSelect:X},Y=()=>{const[c,r]=a.useState([]),[l,m]=a.useState([]),[_,S]=a.useState(),[p,x]=a.useState(),[L,d]=a.useState(),[u,j]=a.useState(),[s,g]=F();a.useEffect(()=>{d(!0),j(!0);const t=async()=>{try{const{data:f}=await b.get("/ingredients");r([{value:"all",label:"All"}].concat(f.map(h=>({value:h.id,label:h.name}))))}catch{r([])}finally{d(!1)}},y=async()=>{try{const{data:f}=await b.get("/areas");m([{value:"all",label:"All"}].concat(f.map(h=>({value:h.id,label:h.name}))))}catch{m([])}finally{j(!1)}};t(),y()},[]),a.useEffect(()=>{S(s.get("ingredient")||"all"),x(s.get("area")||"all")},[s]);const n=t=>{s.set("ingredient",t.value),s.set("page","1"),g(s)},i=t=>{s.set("area",t.value),s.set("page","1"),g(s)},o={option:(t,y)=>({...t,backgroundColor:y.isSelected?"#bfbebe29":"#fff",color:y.isSelected?"#1a1a1a":t.color,"&:active":{backgroundColor:"#c0c0c0"},"&:hover":{backgroundColor:"#bfbebe29"}})};return L||u?e.jsx(N,{}):e.jsxs("div",{className:I.recipesFilterWrap,children:[e.jsx(W,{options:c,placeholder:"Ingredients",styles:o,onChange:n,className:I.recipeFilterSelect,defaultValue:c.find(t=>t.value===_)}),e.jsx(W,{options:l,placeholder:"Areas",styles:o,onChange:i,className:I.recipeFilterSelect,defaultValue:l.find(t=>t.value===p)})]})},ie=()=>{const{id:c}=P(),[r]=F(),[l,m]=a.useState({}),[_,S]=a.useState([]),[p,x]=a.useState({limit:12,total:0}),[L,d]=a.useState(!1),[u,j]=a.useState(null),s=R(G),g=k();return a.useEffect(()=>{s!=null&&s.length||g(E())},[g]),a.useEffect(()=>{j((s==null?void 0:s.find(n=>n.id===c))||null)},[s,c]),a.useEffect(()=>{const n=r.get("ingredient"),i=r.get("area"),o=r.get("page"),t={categoryId:c==="all"?void 0:c};n&&(t["ingredientIds[]"]=n==="all"?void 0:n),i&&(t.areaId=i==="all"?void 0:i),o&&(t.page=o),t.limit=p.limit,m(t)},[c,r]),a.useEffect(()=>{const n=async()=>{d(!0);try{const{data:i}=await b.get("/recipes/search",{params:l});S(i.data),x(o=>({...o,total:i.total}))}catch{S([])}finally{d(!1)}};Object.keys(l).length&&n()},[l]),e.jsxs("section",{className:v.categorySection,children:[e.jsxs("div",{className:v.categoryInfoWrap,children:[e.jsxs(B,{to:"/",className:v.buttonBack,children:[e.jsx(O,{size:18}),e.jsx("span",{children:"Back"})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx(q,{children:u.name}),e.jsx(M,{children:u.description})]})]}),e.jsxs("div",{className:C.recipesSectionWrap,children:[e.jsx(Y,{}),e.jsx("div",{className:C.recipesListContent,children:L?e.jsx(N,{}):e.jsxs(e.Fragment,{children:[e.jsx(D,{recipes:_}),e.jsx(z,{total:p.total,limit:p.limit})]})})]})]})};export{ie as Recipes,ie as default};
