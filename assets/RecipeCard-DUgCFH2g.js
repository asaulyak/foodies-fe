import{u as r,l as F,g as T,k as W,s as w,a as I,i as E,r as D,j as e,c as h,L as M,b as U,o as f,M as u,n as z,m as A}from"./index-1ugjJRoh.js";import{F as B,a as $}from"./index-DbqkQDqM.js";import{M as H}from"./index-CdMz7SEO.js";const O="_card_fx5kx_1",S="_cardContent_fx5kx_11",P="_headerCard_fx5kx_17",Y="_recipeImage_fx5kx_28",q="_recipeDescription_fx5kx_40",G="_avatarIconsRow_fx5kx_58",J="_iconList_fx5kx_65",K="_iconWrapper_fx5kx_73",Q="_active_fx5kx_104",V="_spinner_fx5kx_108",X="_btn_fx5kx_115",Z="_btnWrapper_fx5kx_135",ee="_btnThumb_fx5kx_145",se="_text_fx5kx_149",ae="_accentText_fx5kx_155",s={card:O,cardContent:S,headerCard:P,recipeImage:Y,recipeDescription:q,avatarIconsRow:G,iconList:J,iconWrapper:K,active:Q,spinner:V,btn:X,btnWrapper:Z,btnThumb:ee,text:se,accentText:ae},ie=({recipe:b,className:j,borderStyles:g})=>{const{id:a,title:_,user:o,description:k,thumb:v}=b,c=r(F),l=r(T),n=r(W),N=r(w),i=I(),m=E();l&&c.includes(a);const[C,d]=D.useState(N),R=(t,p)=>{if(!l||n!=null&&n.includes(401)){i(f(u.signin));return}if(a===p&&d(!0),t.target.disabled=!0,c.includes(a)){i(z(a)).then(x=>{x.payload.type||c.includes(a)}).finally(()=>{a===p&&d(!1),t.target.disabled=!1});return}i(A(a)).then(x=>{x.payload.type||c.includes(a)}).finally(()=>{a===p&&d(!1),t.target.disabled=!1})},L=()=>{m(`/recipe/${a}`)},y=()=>{if(!l||n!=null&&n.includes(401))return i(f(u.signin));m(`/user/${o.id}`)};return e.jsxs("li",{className:h([s.card,j]),children:[e.jsx(M,{to:`/recipe/${a}`,children:e.jsx("img",{src:v,alt:_||"Untitled Recipe",className:h([s.recipeImage,g])})}),e.jsxs("div",{className:s.cardContent,children:[e.jsxs("div",{className:s.textWrap,children:[e.jsx("h3",{className:s.headerCard,children:_||"Untitled Recipe"}),e.jsx("p",{className:s.recipeDescription,children:k||"No description"})]}),e.jsxs("div",{className:s.avatarIconsRow,children:[e.jsx("button",{type:"button",className:s.btn,onClick:y,children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:s.btnWrapper,children:e.jsx("img",{src:o.avatar||"https://www.gravatar.com/avatar",alt:"User Avatar",onError:({currentTarget:t})=>{t.onerror=null,t.src="https://placehold.co/50x50/BFBEBE/050505?text=Image"}})}),e.jsx("span",{className:s.btnThumb,children:e.jsx("span",{className:s.accentText,children:o.name})})]})}),e.jsxs("ul",{className:s.iconList,children:[e.jsx("li",{children:e.jsx("button",{type:"button",className:s.iconWrapper,onClick:t=>R(t,a),children:C?e.jsx(U,{size:18}):c.includes(a)?e.jsx(B,{size:18}):e.jsx($,{size:18})})}),e.jsx("li",{children:e.jsx("button",{type:"button",className:s.iconWrapper,onClick:L,children:e.jsx(H,{size:18})})})]})]})]})]})};export{ie as R};
