import{r as c,t as v,j as e,d as $,u as j,v as R,a as T,w as E,x as S,y,z as W,s as k,B as C,$ as B,A as P,C as F,n as I,D}from"./index-BH5qxkaz.js";import{R as L}from"./RecipeCard-BkHOka3T.js";import"./index-6I1vnMiq.js";const z="_sectionTitle_1rons_1",A="_item_1rons_27",U="_list_1rons_49",u={sectionTitle:z,item:A,list:U},q=()=>{const[t,s]=c.useState([]),[n,o]=c.useState(null),[m,l]=c.useState(!0),d=c.useCallback(async()=>await v.get("/recipes/popular"));return c.useEffect(()=>{t.length||d().then(({data:a})=>{s(a)}).catch(a=>o(a.message)).finally(l(!1))},[d,t]),e.jsxs("section",{className:u.section,children:[e.jsx("h2",{className:u.sectionTitle,children:"Popular recipes"}),m&&e.jsx($,{}),n&&e.jsx("p",{children:"Something went wrong. Please try again after a few seconds."}),!!t.length&&!n&&!m&&e.jsx("ul",{className:u.list,children:t.map(a=>e.jsx(L,{recipe:a,className:u.item},a.id))})]})},M="_wrapper_gs8kw_1",H="_title_gs8kw_9",J="_list_gs8kw_29",O="_item_gs8kw_41",Y="_imgWrapper_gs8kw_53",G="_img_gs8kw_53",K="_textWrapper_gs8kw_85",Q="_accentText_gs8kw_101",h={wrapper:M,title:H,list:J,item:O,imgWrapper:Y,img:G,textWrapper:K,accentText:Q},V=({ingredients:t})=>e.jsxs("div",{className:h.wrapper,children:[e.jsx("h3",{className:h.title,children:"Ingredients"}),e.jsx("ul",{className:h.list,children:t.map(s=>e.jsxs("li",{className:h.item,children:[e.jsx("div",{className:h.imgWrapper,children:e.jsx("img",{className:h.img,src:s.image,alt:`Ingredient ${s.title}`,onError:({currentTarget:n})=>{n.onerror=null,n.src="https://placehold.co/60x60/BFBEBE/050505?text=Image"}})}),e.jsxs("div",{className:h.textWrapper,children:[e.jsx("p",{className:h.accentText,children:s.name}),e.jsx("p",{children:s.quantity||"quantity"})]})]},s.id))})]}),X="_wrapper_1p40s_1",Z="_infoSection_1p40s_9",ee="_title_1p40s_19",se="_thumb_1p40s_41",te="_info_1p40s_9",ne="_description_1p40s_85",ae="_btn_1p40s_103",ie="_btnWrapper_1p40s_143",ce="_btnThumb_1p40s_163",re="_text_1p40s_171",oe="_accentText_1p40s_183",i={wrapper:X,infoSection:Z,title:ee,thumb:se,info:te,description:ne,btn:ae,btnWrapper:ie,btnThumb:ce,text:re,accentText:oe},le="_hero_6fawz_1",pe="_imgWrapper_6fawz_9",N={hero:le,imgWrapper:pe},me=({image:t,title:s})=>e.jsx("div",{className:N.hero,children:e.jsx("div",{className:N.imgWrapper,children:e.jsx("img",{className:N.img,src:t||"",alt:`Dish ${s}`,onError:({currentTarget:n})=>{n.onerror=null,n.src="https://placehold.co/400x400/BFBEBE/050505?text=Image not found"},loading:"lazy"})})}),de=({children:t,id:s="",img:n="",title:o="Dish",category:m="Dish",time:l="0",description:d="Dish",authorName:a="John",authorAvatar:_=""})=>{const r=j(R),f=T(),p=E(),b=()=>{if(!r)return f(S(y.signin));p(`/user/${s}`)};return e.jsxs("div",{className:i.wrapper,children:[e.jsx(me,{image:n,title:o}),e.jsxs("div",{children:[e.jsxs("section",{className:i.infoSection,children:[e.jsx("h2",{className:i.title,children:o}),e.jsxs("div",{className:i.thumb,children:[e.jsx("p",{className:i.info,children:m}),e.jsxs("p",{className:i.info,children:[l," min"]})]}),e.jsx("p",{className:i.description,children:d}),e.jsx("button",{type:"button",className:i.btn,onClick:b,children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:i.btnWrapper,children:e.jsx("img",{src:_||"",alt:"User Avatar",onError:({currentTarget:w})=>{w.onerror=null,w.src="https://placehold.co/50x50/BFBEBE/050505?text=Image"}})}),e.jsxs("span",{className:i.btnThumb,children:[e.jsx("span",{className:i.text,children:"Created by:"}),e.jsx("span",{className:i.accentText,children:a})]})]})})]}),t]})]})},_e="_title_1vome_1",he="_list_1vome_19",xe="_item_1vome_39",ue="_btn_1vome_47",ge="_spinner_1vome_71",x={title:_e,list:he,item:xe,btn:ue,spinner:ge},g=["Remove from favorites","Add to favorites"],je=({preparation:t,recipeId:s})=>{const n=T(),o=j(R),m=j(W),l=j(k),[d,a]=c.useState(l),_=m.includes(s),r=_?g[0]:g[1],f=p=>{if(p.target.disabled=!0,a(!0),!o)return a(!1),p.target.disabled=!1,n(S(y.signin));setTimeout(()=>{p.target.disabled=!1,a(!1)},800),_?(p.target.textContent=g[1],n(F(s))):(p.target.textContent=g[0],n(P(s)))};return e.jsxs("section",{className:x.wrapper,children:[e.jsx("h3",{className:x.title,children:"Recipe preparation"}),e.jsx("ul",{className:x.list,children:t.split(`
`).map((p,b)=>e.jsx("p",{className:x.item,children:p},`${Date.now()}-${b}`))}),e.jsxs(C,{onClick:f,className:x.btn,children:[r,d&&e.jsx("span",{className:x.spinner,children:e.jsx(B,{visible:l,width:"120",color:"#bfbebe",ariaLabel:"infinity-spin-loading"})})]})]})},fe=({changeBreadCrumbs:t})=>{const[s,n]=c.useState(null),[o,m]=c.useState(null),[l,d]=c.useState(!0),{id:a}=I(),_=c.useCallback(async r=>await v.get(`/recipes/${r}`));return c.useEffect(()=>{s||_(a).then(({data:r})=>{n(r),t(r.title)}).catch(r=>m(r.message)).finally(d(!1))},[a,t,_,s]),e.jsxs(e.Fragment,{children:[l&&e.jsx($,{}),o&&e.jsx("p",{children:"Something went wrong. Please try again after a few seconds."}),!!s&&!o&&!l&&e.jsxs(de,{id:s.id,img:s.thumb,title:s.title,category:s.category.name,time:s.time,description:s.description,authorName:s.user.name,authorAvatar:s.user.avatar,children:[e.jsx(V,{ingredients:s.ingredients}),e.jsx(je,{preparation:s.instructions,recipeId:s.id})]})]})},be="_section_jz1ql_1",Ne={section:be},Re=()=>{const[t,s]=c.useState("");return e.jsx("section",{className:Ne.section,children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"visually-hidden",children:"Recipe Page"}),e.jsx(D,{currentPageName:t}),e.jsx(fe,{changeBreadCrumbs:s}),e.jsx(q,{})]})})};export{Re as default};
