import{r,h as y,j as e,b as w,S as R,u as g,g as S,a as $,i as E,o as T,M as W,k as B,l as P,s as C,B as F,m as I,n as D,e as L}from"./index-CWFMWRfZ.js";import{R as k}from"./RecipeCard-CWYdWFKg.js";import{P as z}from"./PathInfo-DhQsqkHc.js";const M="_sectionTitle_npxbb_1",U="_item_npxbb_27",q="_itemBorder_npxbb_39",A="_list_npxbb_61",j={sectionTitle:M,item:U,itemBorder:q,list:A},H=()=>{const[t,s]=r.useState([]),[n,l]=r.useState(null),[c,d]=r.useState(!0),_=r.useCallback(async()=>await y.get("/recipes/popular"));return r.useEffect(()=>{t.length||_().then(({data:a})=>{s(a)}).catch(a=>l(a.message)).finally(d(!1))},[_,t]),e.jsxs("section",{className:j.section,children:[e.jsx("h2",{className:j.sectionTitle,children:"Popular recipes"}),c&&e.jsx(w,{size:R.large}),n&&e.jsx("p",{children:"Something went wrong. Please try again after a few seconds."}),!!t.length&&!n&&!c&&e.jsx("ul",{className:j.list,children:t.map(a=>e.jsx(k,{recipe:a,className:j.item,borderStyles:j.itemBorder},a.id))})]})},J="_wrapper_d5gj5_1",O="_title_d5gj5_9",Y="_list_d5gj5_29",Z="_item_d5gj5_41",G="_imgWrapper_d5gj5_53",K="_img_d5gj5_53",Q="_textWrapper_d5gj5_85",V="_accentText_d5gj5_101",h={wrapper:J,title:O,list:Y,item:Z,imgWrapper:G,img:K,textWrapper:Q,accentText:V},X=({ingredients:t})=>e.jsxs("div",{className:h.wrapper,children:[e.jsx("h3",{className:h.title,children:"Ingredients"}),e.jsx("ul",{className:h.list,children:t.map(s=>e.jsxs("li",{className:h.item,children:[e.jsx("div",{className:h.imgWrapper,children:e.jsx("img",{className:h.img,src:s.image,alt:`Ingredient ${s.title}`,onError:({currentTarget:n})=>{n.onerror=null,n.src="https://placehold.co/60x60/BFBEBE/050505?text=Image"}})}),e.jsxs("div",{className:h.textWrapper,children:[e.jsx("p",{className:h.accentText,children:s.name}),e.jsx("p",{children:s.quantity||"quantity"})]})]},s.id))})]}),ee="_wrapper_1ijsm_1",se="_infoSection_1ijsm_9",te="_title_1ijsm_19",ne="_thumb_1ijsm_41",ae="_info_1ijsm_9",ie="_description_1ijsm_85",re="_btn_1ijsm_103",ce="_btnWrapper_1ijsm_145",oe="_btnThumb_1ijsm_165",le="_text_1ijsm_173",pe="_accentText_1ijsm_185",i={wrapper:ee,infoSection:se,title:te,thumb:ne,info:ae,description:ie,btn:re,btnWrapper:ce,btnThumb:oe,text:le,accentText:pe},me="_hero_6fawz_1",de="_imgWrapper_6fawz_9",N={hero:me,imgWrapper:de},_e=({image:t,title:s})=>e.jsx("div",{className:N.hero,children:e.jsx("div",{className:N.imgWrapper,children:e.jsx("img",{className:N.img,src:t||"",alt:`Dish ${s}`,onError:({currentTarget:n})=>{n.onerror=null,n.src="https://placehold.co/400x400/BFBEBE/050505?text=Image not found"},loading:"lazy"})})}),he=({children:t,id:s="",img:n="",title:l="Dish",category:c="Dish",time:d="0",description:_="Dish",authorName:a="John",authorAvatar:x=""})=>{const o=g(S),f=$(),p=E(),m=()=>{if(!o)return f(T(W.signin));p(`/user/${s}`)};return e.jsxs("div",{className:i.wrapper,children:[e.jsx(_e,{image:n,title:l}),e.jsxs("div",{children:[e.jsxs("section",{className:i.infoSection,children:[e.jsx("h2",{className:i.title,children:l}),e.jsxs("div",{className:i.thumb,children:[e.jsx("p",{className:i.info,children:c}),e.jsxs("p",{className:i.info,children:[d," min"]})]}),e.jsx("p",{className:i.description,children:_}),e.jsx("button",{type:"button",className:i.btn,onClick:m,children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:i.btnWrapper,children:e.jsx("img",{src:x||"https://www.gravatar.com/avatar",alt:"User Avatar",onError:({currentTarget:v})=>{v.onerror=null,v.src="https://placehold.co/50x50/BFBEBE/050505?text=Image"}})}),e.jsxs("span",{className:i.btnThumb,children:[e.jsx("span",{className:i.text,children:"Created by:"}),e.jsx("span",{className:i.accentText,children:a})]})]})})]}),t]})]})},xe="_title_1gwd5_1",ue="_list_1gwd5_19",je="_item_1gwd5_39",ge="_btn_1gwd5_47",be="_buttonWrapper_1gwd5_59",fe="_spinner_1gwd5_67",u={title:xe,list:ue,item:je,btn:ge,buttonWrapper:be,spinner:fe},b=["Remove from favorites","Add to favorites"],Ne=({preparation:t,recipeId:s})=>{const n=$(),l=g(S),c=g(B),d=g(P),_=g(C),[a,x]=r.useState(_),o=d.includes(s)?b[0]:b[1],f=p=>{if(!l||c!=null&&c.includes(401))return n(T(W.signin));if(x(!0),p.target.disabled=!0,!d.includes(s)){n(I(s)).then(m=>{m.payload.type||(p.target.textContent=b[0])}).finally(m=>{p.target.disabled=!1,x(!1)});return}n(D(s)).then(m=>{m.payload.type||(p.target.textContent=b[1])}).finally(m=>{p.target.disabled=!1,x(!1)})};return e.jsxs("section",{className:u.wrapper,children:[e.jsx("h3",{className:u.title,children:"Recipe preparation"}),e.jsx("ul",{className:u.list,children:t.split(`
`).map((p,m)=>e.jsx("p",{className:u.item,children:p},`${Date.now()}-${m}`))}),e.jsxs("div",{className:u.buttonWrapper,children:[e.jsx(F,{onClick:f,className:u.btn,children:o}),a&&e.jsx("span",{className:u.spinner,children:e.jsx(w,{})})]})]})},we=({changeBreadCrumbs:t})=>{const[s,n]=r.useState(null),[l,c]=r.useState(null),[d,_]=r.useState(!0),{id:a}=L();return r.useEffect(()=>{if(s&&a===s.id)return;(async o=>await y.get(`/recipes/${o}`))(a).then(({data:o})=>{n(o),t(o.title)}).catch(o=>c(o.message)).finally(_(!1))},[a,t,s]),e.jsxs(e.Fragment,{children:[l&&e.jsx("p",{children:"Something went wrong. Please try again after a few seconds."}),d?e.jsx(w,{size:R.large}):!!s&&!l&&e.jsxs(he,{id:s.id,img:s.thumb,title:s.title,category:s.category.name,time:s.time,description:s.description,authorName:s.user.name,authorAvatar:s.user.avatar,children:[e.jsx(X,{ingredients:s.ingredients}),e.jsx(Ne,{preparation:s.instructions,recipeId:s.id})]})]})},ve="_section_jz1ql_1",ye={section:ve},Te=()=>{const[t,s]=r.useState("");return e.jsx("section",{className:ye.section,children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"visually-hidden",children:"Recipe Page"}),e.jsx(z,{currentPageName:t}),e.jsx(we,{changeBreadCrumbs:s}),e.jsx(H,{})]})})};export{Te as default};
